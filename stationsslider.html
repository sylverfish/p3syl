<!DOCTYPE html>
<html lang="en">
  <head>      
    <meta charset="utf-8">      
    <title>Stations - D3</title>

    <script type="text/javascript" src="d3/d3.js"></script>
   	<link type="text/css" rel="stylesheet" href="cal/cal-heatmap.css"/>
	<link rel="stylesheet" href="mystyle.css">
    <style type="text/css">
	    body{
			padding-top:20px;
		    font-family: "Open Sans";
		    color: gray;
		    background-color: #280000; 
		}

		.cal-heatmap-container .q1
		{
			background-color: #200000;
			fill: #200000
		}

    </style>

    <script src="javascripts/prototype.js" type="text/javascript"></script>
	<script src="javascripts/scriptaculous.js" type="text/javascript"></script>

     <script type="text/javascript" src="cal/cal-heatmap.js"></script>

    
  </head>
<body onkeydown="checkKey(event)" style="background-image: url(images/bg.jpg)">
	<script type="text/javascript">
    function hideLogo(){
    	//document.getElementById("title").style.display = "none";
    	//document.getElementById("title").style.display = "none";
    	// Effect.Fade('id_of_element', { duration: 3.0 });
    	if(!hidden){
    		Effect.Fade('title',{ duration: 1.0, from: 1, to: 0 });
    		hidden=true;
    	}

    }

    var hidden = false;

    function showLogo(){
    	//document.getElementById("title").style.display = "block";
    	Effect.Appear('title', { duration: 1.0 });
    	hidden = false;
    }
    
    </script>


	<div id="title" style="display: block">
		<svg width="300" height="300">
			<circle cx="150" cy="80" r="55" stroke="blue" stroke-width="27" fill="#280000"/>
  			 <rect width="160" height="40" x="70" y="60" style="fill:rgb(255,0,0)" />
  			 <text x="103" y="85" fill="white" >Destinations</text>
  			 <text x="32" y="170" fill="grey" style="font-family: Georgia; font-size: x-small">
  								  A visual representation of the tragic situation of 
		    <tspan x="20" y="190">accidents on the Mumbai Suburban Railway Network.</tspan>
		    <tspan x="31" y="210">(Thane to CST Mumbai, Andheri to Churchgate)</tspan>		    
		</svg>	
		<span style="font-size: x-small; color: pink" >(Press arrow keys LEFT and RIGHT)</style>
	</div>
	<div id="chart" ></div>
	<div id="popme" style="display:none"></div>
	<!--<div><span id="left">Left</span> | <span id="right">Right</span></div>-->




	<script>
var gender=[50,150];
	var clipWidth = 1100;
	var clipHeight = 300;
	width = 100;
	var x=0;
	var cx=0;
	var lx=0;

	var xScale = d3.scale
					.linear()
					.domain([0,1600])
					.range([0,200]);

	var prev=0;	
	var cprev=0;	

	var pad=20;	
	var l=0;
	var speed=1100;
	var pages=3;
	var update;
	var updatePie;

	d3.csv(["data/StationsTrial.csv"], function(error, data){
			 var svg = d3.select('#chart').append('svg')
		    .attr('width', clipWidth)
		    .attr('height', clipHeight);

		    svg.append("defs").append("clipPath")
		    .attr("id", "clip")
		    .append("rect")
		        .attr("width", clipWidth)
		        .attr("height", clipHeight);

		    var g = svg.append("g");

			

			var lines = g.selectAll("line")
			.data(data).enter();

			lines
		    .insert('line') //left
		    	.attr("class", "area").attr("clip-path", "url(#clip)")
		    	.attr("id", "l1")
		    	.attr("x1", function(d){return lx+parseInt(d.inx1)})
		    	.attr("y1", function(d){return d.iny1})
		    	.attr("x2", function(d){return lx+parseInt(d.inx2)})
		    	.attr("y2", function(d){return d.iny2})
		    	.attr("stroke","grey")
		    	.attr("fill", "none")
		    	.attr("stroke-width", "2")
		    	.attr("stroke-opacity","0.5")
		    	.style("stroke-dasharray", ("4, 4"));
		    	// .attr("style", "stroke:rgb(255,0,0);stroke-width:2");
		        // .style("stroke-dasharray", ("3, 3"));  //function(d){return d.Deaths}
		    ;

			var rects = g.selectAll("rect")
			.data(data).enter();
			
			rects
		    .insert('rect') //rect
		    	.attr("class", "area").attr("clip-path", "url(#clip)")
		    	.attr("width","40")
		    	.attr("height", "20")
		    	.attr("x", function(d){ return lx+parseInt(d.rX)})
				.attr("y", function(d){return d.rY})
				.attr("fill", function(d){
					if(d.Type=="Interchange") return "green";
					if(d.Type=="Slow") return "blue";
					if(d.Type=="Fast") return "red"
				})
				.on("mouseover", function(d){
                	d3.select(this)
                	.style("fill-opacity", "1");
                	d3.select(this)
                	.append("title")
                	.text(d.Type + " Station");

                	
			    	
                	document.getElementById('popme').style.display = "block";
                })
                .on("mouseout", function(d){
                	d3.select(this)
                	.style("fill-opacity", "0.8");

                	document.getElementById('popme').style.display = "none";

                })
		    ;

		    lines
		    .insert('line') //right
		    	.attr("class", "area").attr("clip-path", "url(#clip)")
		    	.attr("id", "l2")
		    	.attr("x1", function(d){return lx+parseInt(d.outx1)})
		    	.attr("y1", function(d){return d.outy1})
		    	.attr("x2", function(d){return lx+parseInt(d.outx2)})
		    	.attr("y2", function(d){return d.outy2})
		    	.attr("stroke","grey")
		    	.attr("fill", "none")
		    	.attr("stroke-width", "2")
		    	.attr("stroke-opacity","0.5")
		    	.style("stroke-dasharray", ("4, 4"))
		    	;
		    	// .attr("style", "stroke:rgb(255,0,0);stroke-width:2");
		        // .style("stroke-dasharray", ("3, 3"));  //function(d){return d.Deaths}
		    ;

		    
		    var circles = g.selectAll("circle")
			.data(data).enter();

			circles
			.insert('circle')
				.attr("class", "area").attr("clip-path", "url(#clip)")
		    	.attr("id", "cAll")
		    	.attr("cx", function(d){return lx+parseInt(d.rX)+25})
		    	.attr("cy", function(d){return lx+parseInt(d.rY)-d.All/2-25})
		    	.attr("r", function(d){if(d.All==0) return 1; return d.All/2})
		    	.attr("fill", "white")
		    	.attr("fill-opacity","0.8")
		    	.on("mouseover", function(d){
                	d3.select(this)
                	.style("fill-opacity", "1");

                	d3.select(this)
                	.append("title")
                	.text(d.All + " incidents, and "+d.Deaths +" deaths at "+d.Station);

                	var coordinates = [0, 0];
					coordinates = d3.mouse(this);
					var x = coordinates[0];
					var y = coordinates[1];
					
                	var popme = document.getElementById('popme');
                	// popme.style.display = "block";
                	// console.log(x + " " + y)
                	popme.style = "position: absolute; top:"+(y+150)+"px; left:"+(x+30)+"px; border:1px solid red; color: red; padding:5px; display: none" ;
                	Effect.Appear('popme', {duration: 1.0} );
                	// popme.style=('position', 'absolute' );

                	//http://stackoverflow.com/questions/16770763/mouse-position-in-d3
                	//http://stackoverflow.com/questions/14825864/jquery-show-a-hidden-div-at-mouse-position-when-a-link-is-clicked

                	gender= [d.Male, d.Female];
                	updatePie();
     //            	console.log(gender[0], gender[1])
     //            	var color = d3.scale.category10();
					// var arc = d3.svg.arc()
					//     .innerRadius(200)
					//     .outerRadius(240)
					//     .cornerRadius(20);
					// var pie = d3.layout.pie()
					//     .padAngle(.02);

				 //    var pies = g.selectAll("path")
					// .data(gender).enter();

					// pies.insert("path")
					//     .style("fill", function(d, i) { return color(i); })
					//     .attr("d", arc);

		    	
                })
                .on("mouseout", function(d){
                	d3.select(this)
                	.style("fill-opacity", "0.8");

                	document.getElementById('popme').style.display = "none";
                	// Effect.Fade('popme', {duration: 5.0, from: 1, to: 0} );

                })
		    	;	

		    
		    circles
			.insert('circle')
				.attr("class", "area").attr("clip-path", "url(#clip)")
		    	.attr("id", "cDeaths")
		    	.attr("cx", function(d){return lx+parseInt(d.rX)+25})
		    	.attr("cy", function(d){return lx+parseInt(d.rY)-d.Deaths/2-25})
		    	.attr("r", function(d){if(d.All==0) return 1; return d.Deaths/2})
		    	.attr("fill", "darkred")
		    	.attr("fill-opacity","0.8")
		    	.on("mouseover", function(d){
                	d3.select(this)
                	.style("fill-opacity", "1");
                	d3.select(this)
                	.append("title")
                	.text(d.All + " incidents, and "+d.Deaths +" deaths at "+d.Station);

                	
			    	
                	document.getElementById('popme').style.display = "block";
                })
                .on("mouseout", function(d){
                	d3.select(this)
                	.style("fill-opacity", "0.8");

                	document.getElementById('popme').style.display = "none";
                })
		    	;


		   	 
			

		 //   	var arc = d3.svg.arc()
			//     .innerRadius(radius - 40)
			//     .outerRadius(radius)
			//     .cornerRadius(20);

			// var pie = d3.layout.pie()
			//     .padAngle(.02);

			// var color = d3.scale.category10();


			// var pies = g.selectAll("path")
			// .data(pie(data)).enter();

			// pies
			// .insert("path")
			// .style("fill", function(d, i) { return color(i); })
   //  		.attr("d", arc);

	   	
			rects
		    .insert('rect') //gender
		    	.attr("class", "area").attr("clip-path", "url(#clip)")
		    	.attr("id", "gender1")
		    	.attr("width", function(d){return d.Male/2})
		    	.attr("height", 3 )
		    	.attr("x", function(d){return lx+parseInt(d.rX);})
				.attr("y", function(d){return parseInt(d.rY)+50})
				.attr("fill", "blue")
				.on("mouseover", function(d){
					var total = parseInt(d.Male) + parseInt(d.Female);
					var m = Math.round(d.Male/total*100);
					var f = Math.round(d.Female/total*100);
                	d3.select(this)
                	.append("title")
                	.text(m + "% male, and "+ f +"% female");
                })
		    ;

		    rects
		    .insert('rect') //gender
		    	.attr("class", "area").attr("clip-path", "url(#clip)")
		    	.attr("id", "gender2")
		    	.attr("width", function(d){return d.Female/2})
		    	.attr("height", 3 )
		    	.attr("x", function(d){return lx+parseInt(d.rX);})
				.attr("y", function(d){return parseInt(d.rY)+55})
				.attr("fill", "green")
				.on("mouseover", function(d){
					var total = parseInt(d.Male) + parseInt(d.Female);
					var m = Math.round(d.Male/total*100);
					var f = Math.round(d.Female/total*100);
                	d3.select(this)
                	.append("title")
                	.text(m + "% male, and "+ f +"% female");
                })
		    ;

		  //   rects
		  //   .insert('rect') //gender
		  //   	.attr("class", "area").attr("clip-path", "url(#clip)")
		  //   	.attr("id", "gender1")
		  //   	.attr("width", 10 )//function(d){return d.Male/2}
		  //   	.attr("height", function(d){
		  //   		total=parseInt(d.Male)+parseInt(d.Female);
		  //   		if(total==0)
		  //   			h=0;
		  //   		else{
		  //   			h=d.Male/(total)*10; 
		  //   		}
		  //   		return  Math.round(h);
		  //   		})
		  //   	.attr("x", function(d){return lx+parseInt(d.rX)-15;})
				// .attr("y", function(d){return parseInt(d.rY)})
				// .attr("fill", "blue")
		  //   ;

		    // function(d){}

		  //   rects
		  //   .insert('rect') //gender
		  //   	.attr("class", "area").attr("clip-path", "url(#clip)")
		  //   	.attr("id", "gender2")
		  //   	.attr("width", 10 )//function(d){return d.Male/2}
		  //   	.attr("height", function(d){
		  //   		total=parseInt(d.Male)+parseInt(d.Female);
		  //   		if(total==0)
		  //   			h=0;
		  //   		else{
		  //   			h=d.Male/(total)*10;  
		  //   		}
		  //   		return Math.round(h);
		  //   		})
		  //   	.attr("x", function(d){return lx+parseInt(d.rX)+15;})
				// .attr("y", function(d){
				// 	t=parseInt(d.Male)+parseInt(d.Female);
		  //   		if(total==0)
		  //   			th=0;
		  //   		else{
		  //   			th=d.Male/(t)*10; 
		  //   		}
		  //   		console.log(h);
				// 	return Math.round(parseInt(d.rY)+h)})
				// .attr("fill", "green")
		  //   ;

		    rects
		    .insert('rect') //day
		    	.attr("class", "area").attr("clip-path", "url(#clip)")
		    	.attr("id", "day")
		    	.attr("width", function(d){return d.Day/2})
		    	.attr("height", 3 )
		    	.attr("x", function(d){return lx+parseInt(d.rX);})
				.attr("y", function(d){return parseInt(d.rY)+63})
				.attr("fill", "yellow")
				.on("mouseover", function(d){
					var total = parseInt(d.Male) + parseInt(d.Female);
					var m = Math.round(d.Day/total*100);
					var f = Math.round(d.Night/total*100);
                	d3.select(this)
                	.append("title")
                	.text(m + "% during daytime, and "+ f +"% during nights");
                })
		    ;

		     rects
		    .insert('rect') //night
		    	.attr("class", "area").attr("clip-path", "url(#clip)")
		    	.attr("id", "night")
		    	.attr("width", function(d){return d.Night/2})
		    	.attr("height", 3 )
		    	.attr("x", function(d){return lx+parseInt(d.rX);})
				.attr("y", function(d){return parseInt(d.rY)+68})
				.attr("fill", "grey")
				.on("mouseover", function(d){
					var total = parseInt(d.Male) + parseInt(d.Female);
					var m = Math.round(d.Day/total*100);
					var f = Math.round(d.Night/total*100);
                	d3.select(this)
                	.append("title")
                	.text(m + "% during daytime, and "+ f +"% during nights");
                })
		    ;


			

		    var text = g.selectAll("text")
				.data(data).enter();

			text
				.insert('text')
				.attr("class", "area").attr("clip-path", "url(#clip)")
		    	.attr("id", "stations")
		    	.attr("x", function(d){return lx+parseInt(d.rX)})
		    	.attr("y", function(d){return lx+parseInt(d.rY)+40})
		    	.text(function (d) {return d.Station;})
		    	.attr("font-family", "sans-serif")
                .attr("font-size", "12px")
                .attr("fill", "white");
		    	;

		   	text
				.insert('text')
				.attr("class", "area").attr("clip-path", "url(#clip)")
		    	.attr("id", "figures")
		    	.attr("x", function(d){return lx+parseInt(d.rX)+30+d.All/2})
		    	.attr("y", function(d){return lx+parseInt(d.rY)-d.All/2-25})
		    	.text(function (d) {return d.All;})
		    	.attr("font-family", "Open Sans")
		    	.attr("font-weight", "Bold")
                .attr("font-size", function (d) {
                	var size=Math.round(d.All/2);
                	if(size<9) size=9;
                	return size;
                })
                .attr("fill", "grey")
                .style("fill-opacity", "0.7")
                .on("mouseover", function(d){
                	d3.select(this)
                	.style("fill-opacity", "1");

                	d3.select(this)
                	.append("title")
                	.text("Incidents in a year");
                })
                .on("mouseout", function(d){
                	d3.select(this)
                	.style("fill-opacity", "0.7");
                })
		    	;

		   	text
				.insert('text')
				.attr("class", "area").attr("clip-path", "url(#clip)")
		    	.attr("id", "figuresdeaths")
		    	.attr("x", function(d){return lx+parseInt(d.rX)+d.All/2+30})
		    	.attr("y", function(d){return lx+parseInt(d.rY)-25})
		    	.text(function (d) {return d.Deaths;})
		    	.attr("font-family", "Open Sans")
		    	.attr("font-weight", "Bold")
                .attr("font-size", function (d) {
                	var size=Math.round(d.All/3);
                	if(size<9) size=9;
                	return size;
                })
                .attr("fill", "darkred")
                .style("fill-opacity", "0.7")
                .on("mouseover", function(d){
                	d3.select(this)
                	.style("fill-opacity", "1");

                	d3.select(this)
                	.append("title")
                	.text("Deaths in a year");
                })
                .on("mouseout", function(d){
                	d3.select(this)
                	.style("fill-opacity", "0.7");
                })
		    	;


		    	//function(d){return lx+parseInt(d.rY)-d.Deaths/2-25}

		 //    circles
			// .insert('circle')
			// 	.attr("class", "area").attr("clip-path", "url(#clip)")
		 //    	.attr("id", "cDeaths")
		 //    	.attr("cx", function(d){function(d){if(d.All==0) return 1; return xScale(d.Deaths)})
		 //    	.attr("cy", 200)
		 //    	.attr("r", function(d){if(d.All==0) return 1; return xScale(d.Deaths)})
		 //    	.attr("fill", "red")
		    	;	    

		 //    g.selectAll("rect")
			// .data(data).enter()
		 //    .insert('rect') //rect
		 //    	.attr("class", "area").attr("clip-path", "url(#clip)")
		 //    ;

		 //    g.selectAll("circle")
			// .data(data).enter()
		 //    .insert('line') //circle
		 //    	.attr("class", "area").attr("clip-path", "url(#clip)")
		 //    ;

		 //    g.selectAll("line")
			// .data(data).enter()
		 //    .insert('line') //right
		 //    	.attr("class", "area").attr("clip-path", "url(#clip)")
		 //    ;

			// g.selectAll("rect")
		 //    // .data(data).enter().append('rect')
		 //    //     .attr("class", "area").attr("clip-path", "url(#clip)")
		 //    //     .attr('x', function(d){x=x+prev+pad; prev=parseInt(d.All); return x;})
		 //    //     // .attr('x', function(d){return xScale(d.x)})
		 //    //     .attr('width', function(d){if(d.All==0) return 1; return (d.All)})
		 //    //     .attr('height', function(d){if(d.All==0) return 1; return (d.All)} )
		 //    //     .style('fill', d3.scale.category20());  //function(d){return d.Deaths}
		 //    .data(data).enter()
		 //    .insert('rect')
		 //        .attr("class", "area").attr("clip-path", "url(#clip)")
		 //        .attr('x', function(d){x=x+prev+pad; prev=parseInt(d.All); return x;})
		 //        // .attr('x', function(d){return xScale(d.x)})
		 //        .attr('width', function(d){if(d.All==0) return 1; return (d.All)})
		 //        .attr('height', function(d){if(d.All==0) return 1; return (d.All)} )
		 //        .style('fill', d3.scale.category20());  //function(d){return d.Deaths}



			// g.selectAll("circle")
			// .data(data).enter()
		 //    .insert('circle')
		 //    	.attr("class", "area").attr("clip-path", "url(#clip)")
		 //        .attr('r', function(d){if(d.All==0) return 1; return xScale(d.All)})
		 //        .attr('cx', function(d){cx=cx+cprev+pad; cprev=parseInt(d.All); return cx;})
		 //    	.attr('cy', 200)
		 //    	.style('fill', "red");

		     update = function(){
			    g.selectAll("rect")
			        .transition().duration(500)
					.attr("x", function(d){return lx+parseInt(d.rX)});

			    g.selectAll("#l1")
			        .transition().duration(500)
			        .attr("x1", function(d){return lx+parseInt(d.inx1)})
		    		.attr("x2", function(d){return lx+parseInt(d.inx2)})

			    g.selectAll("#l2")
			        .transition().duration(500)
			        .attr("x1", function(d){return lx+parseInt(d.outx1)})
		    		.attr("x2", function(d){return lx+parseInt(d.outx2)})

		    	g.selectAll("#cAll")
			        .transition().duration(500)
			        .attr("cx", function(d){return lx+parseInt(d.rX)+25});

			    g.selectAll("#cDeaths")
			        .transition().duration(500)
			        .attr("cx", function(d){return lx+parseInt(d.rX)+25});

			    g.selectAll("text")
			        .transition().duration(500)
			        .attr("x", function(d){return lx+parseInt(d.rX)});

			    g.selectAll("#gender1")
			        .transition().duration(500)
			        .attr("x", function(d){return lx+parseInt(d.rX)})

			    g.selectAll("#gender2")
			        .transition().duration(500)
			        .attr("x", function(d){return lx+parseInt(d.rX)});

			     g.selectAll("#day")
			        .transition().duration(500)
			        .attr("x", function(d){return lx+parseInt(d.rX)})

			    g.selectAll("#night")
			        .transition().duration(500)
			        .attr("x", function(d){return lx+parseInt(d.rX)})

			    g.selectAll("#figures")
			        .transition().duration(500)
			        .attr("x", function(d){return lx+parseInt(d.rX)+30+d.All/2})

			    g.selectAll("#figuresdeaths")
			        .transition().duration(500)
		    		.attr("x", function(d){return lx+parseInt(d.rX)+d.All/2+30})

			    // g.selectAll("circle")
			    //     .transition().duration(500)
			    //     // .attr('x', function(d){return xScale(d.x)});
			    //     .attr('cx', function(d){cx=cx+cprev+pad; cprev=parseInt(d.All); return cx;});
			};		
	});



	var checkKey = function(e){
		// console.log(e);
	    if (e.keyCode == '38') {
	        // up arrow
	    }
	    else if (e.keyCode == '40') {
	        // down arrow
	    }
	    else if (e.keyCode == '37') {
	    	// left arrow
	    	// console.log("L:"+x)
	    	if(x>=0) {
	    		l=0;
	    		lx=0;
	    		cx=0;
	    		showLogo();
	    		Effect.Shake('chart',{duration:0.1, distance:5}); 
	    		return;
	    	}
	    	hideLogo();
	    	l=l+speed;
			x=l;
			lx = lx+speed;
			cx=l;
			// console.log("L:"+x);
			if(x>=0) {
	    		l=0;
	    		lx=0;
	    		cx=0;
	    		showLogo();
		    }
			update();

	    }
	    else if (e.keyCode == '39') {
	       	// right arrow
	       	// console.log("R:"+x)
	       	if(x<=-(pages-1)*speed) {Effect.Shake('chart',{duration:0.1, distance:5}); return;}

	       	hideLogo();
	       	l=l-speed;
			x=l;
			lx = lx-speed;

			if(x<=-pages*speed) {x=-pages*speed; l=-pages*speed;}

			cx=l;
			if(cx<=-pages*speed) {x=-pages*speed; l=-pages*speed;}

			// console.log("R:"+x)
		    update();
	    }



	}


//http://bl.ocks.org/mbostock/c501f6cae402ab5e90c9
	

	var width = 500,
	    height = 300,
	    radius = height / 2 - 10;

	var arc = d3.svg.arc()
	    .innerRadius(radius - 20)
	    .outerRadius(radius)
	    .cornerRadius(20);

	var pie = d3.layout.pie()
	    .padAngle(.02);

	var color = d3.scale.category10();

	var svg = d3.select('#chart2').append('svg')
	// var svg = d3.select("body").append("svg")
	    .attr("width", width)
	    .attr("height", height)
	  .append("g")
	    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

	svg.selectAll("path")
	    .data(pie(gender))
	  .enter().append("path")
	    .style("fill", function(d, i) { return color(i); })
	    .attr("d", arc);

	updatePie = function(){
		console.log(gender[0] + "," +gender[1])
		svg.selectAll("path")
			.data(pie(gender))
			// .enter().append("path")
		    .style("fill", function(d, i) { return color(i); })
		    .attr("d", arc)
		    .transition().duration(1000);
	}

	</script>


<div id="chart2"></div>
<script>
	var calendar = new CalHeatMap();
	var itemNameV = "incident";
	var verticalOrientationV = false;
	var startDates = [2012, 2013, 2014];
	var domainV = "month";
	var domainDynamicDimensionV = false;
	var domainGutterV = 2;
	var domainMarginV = 2;
	var subDomainV = "day";
	var domainLabelFormatV = "%b-%y"; 
	//subDomainTextFormat: "%d",
	var rangeV = 12;
	var leg = [0,1,2,4];
	// var leg = [80,120,150,170];
	var legendVerticalPositionV = "center";
	var legendOrientationV = "vertical";
	var cellSizeV = 9;
	var dataV = "jsons/ThaneAll.json";

	calendar.init({
			itemSelector: "#popme",
			itemName: itemNameV,
			verticalOrientation: verticalOrientationV,
	    	data: dataV,
	    	start: new Date(2012, 0),
	    	domain: domainV,
			domainLabelFormat: domainLabelFormatV,
			domainDynamicDimension: domainDynamicDimensionV,
			domainGutter: domainGutterV,
		    domainMargin: domainMarginV,
	    	subDomain: subDomainV,
	    	considerMissingDataAsZero: true,
	    	//rowLimit: 31,
			//subDomainTextFormat: "%d",
			// subDomainTitleFormat: {
			// 	filled:	"Whats is going on {name} to be {count} if {date} over {connector}",
			// 	empty: "nothing to declare on {date}"
			// },
			range: rangeV,
			legend: leg,
			legendVerticalPosition: legendVerticalPositionV,
			legendOrientation: legendOrientationV,
			//legendMargin: [0,20,0,0],
			cellSize: cellSizeV,
			// legendColors: {
			// 	empty: "green"
			// }
			});
	    

</script>
</body>
<html>